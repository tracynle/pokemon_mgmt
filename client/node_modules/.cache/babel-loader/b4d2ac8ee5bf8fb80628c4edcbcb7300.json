{"ast":null,"code":"// Actions are what you want to do\n// Add and Delete trainer and pokemon\n// import axios from 'axios';\n// ===== TRAINER ACTIONS =====\nexport const getTrainersAction = () => {\n  // With thunk middleware, you can return a function from this action creator\n  return async (dispatch, getState) => {\n    // asynchronously fetch trainers\n    let fetchPromise = fetch(\"http://localhost:3001/api/trainers\");\n    let response = await fetchPromise;\n    let trainers = await response.json(); // trainers is an array\n\n    console.log(\"Response from fetching trainers:\", trainers); // if you want to await, don't use map, because the function in map(function)\n    // needs to be async, so those functions will run asynchronously and will not\n    // wait until they are done. So any code after the map() will run immediately.\n    //\n    // Loop through trainers. For each trainer, fetch their pokemons.\n    // Then put pokemons in the \"pokemons\" key.\n\n    for (let i = 0; i < trainers.length; i++) {\n      let trainer = trainers[i];\n      fetchPromise = fetch(\"http://localhost:3001/api/\".concat(trainer.name, \"/pokemons\"));\n      response = await fetchPromise;\n      let pokemons = await response.json();\n      trainer.pokemons = pokemons;\n    } // After all trainers and respective pokemons are fetched, dispatch\n\n\n    dispatch({\n      type: \"FETCHED TRAINERS FROM API\",\n      data: trainers\n    });\n  };\n};\nexport const addTrainer = data => {\n  console.log(\"DATAAAA\", data);\n  return async (dispatch, getState) => {\n    // create a trainer/add\n    let promise = fetch(\"http://localhost:3001/api/trainer\", {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name\n      })\n    });\n    let response = await promise;\n    let trainer = await response.json();\n    trainer.pokemons = [];\n    dispatch({\n      type: \"ADDED TRAINER\",\n      data: trainer\n    });\n  };\n}; // export const getDeleteTrainerAction = (name) => {\n//     return { // returns an action map\n//         type: 'DELETE TRAINER',\n//         name: name\n//     };\n// }\n\nexport const getDeleteTrainerAction = name => {\n  return async (dispatch, getState) => {\n    // returns an action function\n    // axios.delete(\"http://localhost:3001/api/trainer/?name=\" + name).then(function() {\n    //     dispatch({\n    //         type: \"TRAINER DELETED\",\n    //         name: name\n    //     });\n    // });\n    let promise = fetch(\"http://localhost:3001/api/deletetrainer/?name=\" + name, {\n      method: \"POST\" // could be \"delete\" too\n\n    });\n    await promise; // we're assuming no errors\n\n    dispatch({\n      type: \"TRAINER DELETED\",\n      name: name\n    });\n  };\n};\nexport const searchTrainer = data => {\n  return {\n    type: 'SEARCH TRAINER',\n    data: data\n  };\n}; // ===== POKEMON ACTIONS =====\n// export const getAddPokemonAction = (data) => {\n//     return {\n//         type: 'ADD POKEMON',\n//         data: data\n//     };\n// }\n\nexport const getAddPokemonAction = (data, trainerName) => {\n  console.log(\"ADDINGGGGG\", data);\n  return async (dispatch, getState) => {\n    let promise = fetch(\"http://localhost:3001/api/pokemon?trainerName=\" + trainerName, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name\n      })\n    });\n    let response = await promise;\n    let pokemon = await response.json();\n    pokemon.trainer = [];\n    dispatch({\n      type: \"ADDED POKEMON\",\n      data: pokemon\n    });\n  };\n};\nexport const getDeletePokemonAction = (id, name) => {\n  return {\n    type: 'DELETE POKEMON',\n    id: id,\n    name: name\n  };\n};\nexport const searchPokemon = data => {\n  return {\n    type: 'SEARCH POKEMON',\n    data: data\n  };\n};\nexport const getAddToMeAction = data => {\n  return {\n    type: 'ADD TO ME',\n    data: data\n  };\n};","map":{"version":3,"sources":["/Users/tracynle/Bootcamp/pokemon_mgmt/client/src/actions/index.js"],"names":["getTrainersAction","dispatch","getState","fetchPromise","fetch","response","trainers","json","console","log","i","length","trainer","name","pokemons","type","data","addTrainer","promise","method","headers","body","JSON","stringify","getDeleteTrainerAction","searchTrainer","getAddPokemonAction","trainerName","pokemon","getDeletePokemonAction","id","searchPokemon","getAddToMeAction"],"mappings":"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","sourcesContent":["// Actions are what you want to do\n// Add and Delete trainer and pokemon\n// import axios from 'axios';\n\n// ===== TRAINER ACTIONS =====\nexport const getTrainersAction = () => {\n\n    // With thunk middleware, you can return a function from this action creator\n    return async (dispatch, getState) => {\n\n        // asynchronously fetch trainers\n        let fetchPromise = fetch(\"http://localhost:3001/api/trainers\");\n        let response = await fetchPromise;\n        let trainers = await response.json(); // trainers is an array\n        console.log(\"Response from fetching trainers:\", trainers);\n\n        // if you want to await, don't use map, because the function in map(function)\n        // needs to be async, so those functions will run asynchronously and will not\n        // wait until they are done. So any code after the map() will run immediately.\n        //\n        // Loop through trainers. For each trainer, fetch their pokemons.\n        // Then put pokemons in the \"pokemons\" key.\n        for (let i = 0; i < trainers.length; i++) {\n            let trainer = trainers[i];\n            fetchPromise = fetch(`http://localhost:3001/api/${trainer.name}/pokemons`);\n            response = await fetchPromise;\n            let pokemons = await response.json();\n            trainer.pokemons = pokemons;\n        }\n\n        // After all trainers and respective pokemons are fetched, dispatch\n        dispatch({\n            type: \"FETCHED TRAINERS FROM API\",\n            data: trainers\n        });\n    }\n};\n\nexport const addTrainer = (data) => {\n    console.log(\"DATAAAA\", data);\n    return async (dispatch, getState) => {\n        // create a trainer/add\n        let promise = fetch(\"http://localhost:3001/api/trainer\", {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({name: data.name})\n        });\n\n        let response = await promise;\n        let trainer = await response.json();\n        trainer.pokemons = [];\n\n        dispatch ({\n            type: \"ADDED TRAINER\",\n            data:  trainer\n        })\n    }\n}\n\n// export const getDeleteTrainerAction = (name) => {\n//     return { // returns an action map\n//         type: 'DELETE TRAINER',\n//         name: name\n//     };\n// }\n\nexport const getDeleteTrainerAction = (name) => {\n    return async (dispatch, getState) => { // returns an action function\n        // axios.delete(\"http://localhost:3001/api/trainer/?name=\" + name).then(function() {\n        //     dispatch({\n        //         type: \"TRAINER DELETED\",\n        //         name: name\n        //     });\n        // });\n\n        let promise = fetch(\"http://localhost:3001/api/deletetrainer/?name=\" + name, {\n            method: \"POST\", // could be \"delete\" too\n        });\n        await promise; // we're assuming no errors\n\n        dispatch({\n            type: \"TRAINER DELETED\",\n            name: name\n        });\n    };\n}\n\nexport const searchTrainer = (data) => {\n    return {\n        type: 'SEARCH TRAINER',\n        data: data\n    };\n}\n\n// ===== POKEMON ACTIONS =====\n// export const getAddPokemonAction = (data) => {\n//     return {\n//         type: 'ADD POKEMON',\n//         data: data\n//     };\n// }\n\nexport const getAddPokemonAction = (data, trainerName) => {\n    console.log(\"ADDINGGGGG\", data);\n\n    return async(dispatch, getState) => {\n        let promise = fetch(\"http://localhost:3001/api/pokemon?trainerName=\" + trainerName, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({name: data.name})\n        });\n\n        let response = await promise;\n        let pokemon = await response.json();\n        pokemon.trainer = [];\n\n        dispatch ({\n            type: \"ADDED POKEMON\",\n            data:  pokemon\n        })\n    }\n}\n\nexport const getDeletePokemonAction = (id, name) => {\n    return {\n        type: 'DELETE POKEMON',\n        id: id,\n        name: name\n    };\n}\n\nexport const searchPokemon = (data) => {\n    return {\n        type: 'SEARCH POKEMON',\n        data: data\n    };\n}\n\nexport const getAddToMeAction = (data) => {\n    return {\n        type: 'ADD TO ME',\n        data: data\n    }\n}\n"]},"metadata":{},"sourceType":"module"}